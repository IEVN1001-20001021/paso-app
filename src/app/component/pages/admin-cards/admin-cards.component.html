<div class="bg-white shadow rounded-md p-6 mb-4">
  <h2 class="text-lg font-semibold text-gray-800 mb-2">Administrar Tarjetas</h2>

  <div *ngFor="let card of cards; let i = index" class="border rounded-md mb-4">
    <!-- Resumen de la tarjeta -->
    <div
      class="flex items-center p-4 justify-between cursor-pointer"
      (click)="toggleCardDetails(i)"
    >
      <div class="flex items-center">
        <i [ngClass]="getCardIcon(card.cardNumber)" class="mr-3 text-2xl"></i>
        <span>
          {{ card.nombre_en_tarjeta }} - **** **** ****
          {{
            card.numero_enmascarado ? card.numero_enmascarado.slice(-4) : "N/A"
          }}
        </span>
      </div>
      <i
        class="fas"
        [ngClass]="{
          'fa-chevron-down': selectedCard === i,
          'fa-chevron-right': selectedCard !== i
        }"
      ></i>
    </div>

    <!-- Detalles desplegables -->
    <div *ngIf="selectedCard === i" class="bg-gray-50 p-4 border-t">
      <p><strong>Nombre en tarjeta:</strong> {{ card.nombre_en_tarjeta }}</p>
      <p>
        <strong>Número de tarjeta:</strong> **** **** ****
        {{ card.numero_enmascarado.slice(-4) }}
      </p>
      <p><strong>Fecha de expiración:</strong> {{ card.fecha_expiracion }}</p>

      <button
        (click)="deleteCard(card)"
        class="w-full bg-red-500 text-white font-semibold py-2 rounded-md hover:bg-red-600 mt-4 focus:outline-none focus:ring-2 focus:ring-red-400"
      >
        Eliminar Tarjeta
      </button>
    </div>
  </div>
</div>
